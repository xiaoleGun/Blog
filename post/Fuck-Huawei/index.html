<!doctype html>
<html lang="zh"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"><meta><title>华为搞机指北(小白向) - xiaoleGun&#039;Blog</title><link rel="manifest" href="/manifest.json"><meta name="application-name" content="xiaoleGun"><meta name="msapplication-TileImage" content="/img/favicon.png"><meta name="apple-mobile-web-app-capable" content="yes"><meta name="apple-mobile-web-app-title" content="xiaoleGun"><meta name="apple-mobile-web-app-status-bar-style" content="default"><meta name="description" content="这都不会小白向也拯救不了你惹。"><meta property="og:type" content="blog"><meta property="og:title" content="华为搞机指北(小白向)"><meta property="og:url" content="https://blog.xiaolegun.cn/post/Fuck-Huawei/"><meta property="og:site_name" content="xiaoleGun&#039;Blog"><meta property="og:description" content="这都不会小白向也拯救不了你惹。"><meta property="og:locale" content="zh_CN"><meta property="og:image" content="https://s4.ax1x.com/2022/02/20/HL2ShQ.png"><meta property="og:image" content="https://s4.ax1x.com/2022/02/20/HL2Pcn.png"><meta property="og:image" content="https://s4.ax1x.com/2022/02/20/HL2C1s.png"><meta property="og:image" content="https://s4.ax1x.com/2022/02/20/HLgztg.png"><meta property="og:image" content="https://s4.ax1x.com/2022/02/20/HL29pj.png"><meta property="og:image" content="https://s4.ax1x.com/2022/02/20/HL2iXq.png"><meta property="og:image" content="https://s4.ax1x.com/2022/02/20/HL2kn0.png"><meta property="og:image" content="https://s4.ax1x.com/2022/02/20/HL2ZAU.png"><meta property="og:image" content="https://s4.ax1x.com/2022/02/20/HL2c4g.png"><meta property="og:image" content="https://s4.ax1x.com/2022/02/20/HL2E7T.png"><meta property="og:image" content="https://s4.ax1x.com/2022/02/20/HL2ABV.png"><meta property="og:image" content="https://s4.ax1x.com/2022/02/20/HL2eNF.png"><meta property="og:image" content="https://s4.ax1x.com/2022/02/20/HL2mh4.png"><meta property="og:image" content="https://s4.ax1x.com/2022/02/20/HL2u9J.png"><meta property="og:image" content="https://s4.ax1x.com/2022/02/20/HL2K39.png"><meta property="og:image" content="https://s4.ax1x.com/2022/02/20/HL21nx.png"><meta property="og:image" content="https://s4.ax1x.com/2022/02/20/HL2McR.jpg"><meta property="og:image" content="https://s4.ax1x.com/2022/02/20/HL2Qj1.jpg"><meta property="og:image" content="https://s4.ax1x.com/2022/02/20/HL23B6.png"><meta property="og:image" content="https://s4.ax1x.com/2022/02/20/HL4XBn.jpg"><meta property="og:image" content="https://s4.ax1x.com/2022/02/20/HL28HK.png"><meta property="og:image" content="https://s4.ax1x.com/2022/02/20/HL2JAO.png"><meta property="og:image" content="https://s4.ax1x.com/2022/02/20/HL2YND.png"><meta property="og:image" content="https://s4.ax1x.com/2022/02/20/HL2t4e.png"><meta property="og:image" content="https://s4.ax1x.com/2022/02/20/HL2dgA.png"><meta property="og:image" content="https://s4.ax1x.com/2022/02/20/HL2U9H.png"><meta property="og:image" content="https://s4.ax1x.com/2022/02/20/HL4XBn.jpg"><meta property="og:image" content="https://s4.ax1x.com/2022/02/20/HL2yE8.png"><meta property="og:image" content="https://s4.ax1x.com/2022/02/20/HL2rHf.png"><meta property="og:image" content="https://s4.ax1x.com/2022/02/20/HL2a3d.png"><meta property="og:image" content="https://s4.ax1x.com/2022/02/20/HL26US.jpg"><meta property="og:image" content="https://s4.ax1x.com/2022/02/20/HL2But.jpg"><meta property="og:image" content="https://s4.ax1x.com/2022/02/20/HL2R3j.jpg"><meta property="og:image" content="https://s4.ax1x.com/2022/02/20/HL2wjI.jpg"><meta property="article:published_time" content="2022-02-19T12:37:55.000Z"><meta property="article:modified_time" content="2022-02-20T13:37:55.000Z"><meta property="article:author" content="xiaoleGun"><meta property="article:tag" content="GSI"><meta property="twitter:card" content="summary"><meta property="twitter:image:src" content="https://s4.ax1x.com/2022/02/20/HL2ShQ.png"><script type="application/ld+json">{"@context":"https://schema.org","@type":"BlogPosting","mainEntityOfPage":{"@type":"WebPage","@id":"https://blog.xiaolegun.cn/post/Fuck-Huawei/"},"headline":"华为搞机指北(小白向)","image":["https://s4.ax1x.com/2022/02/20/HL2ShQ.png","https://s4.ax1x.com/2022/02/20/HL2Pcn.png","https://s4.ax1x.com/2022/02/20/HL2C1s.png","https://s4.ax1x.com/2022/02/20/HLgztg.png","https://s4.ax1x.com/2022/02/20/HL29pj.png","https://s4.ax1x.com/2022/02/20/HL2iXq.png","https://s4.ax1x.com/2022/02/20/HL2kn0.png","https://s4.ax1x.com/2022/02/20/HL2ZAU.png","https://s4.ax1x.com/2022/02/20/HL2c4g.png","https://s4.ax1x.com/2022/02/20/HL2E7T.png","https://s4.ax1x.com/2022/02/20/HL2ABV.png","https://s4.ax1x.com/2022/02/20/HL2eNF.png","https://s4.ax1x.com/2022/02/20/HL2mh4.png","https://s4.ax1x.com/2022/02/20/HL2u9J.png","https://s4.ax1x.com/2022/02/20/HL2K39.png","https://s4.ax1x.com/2022/02/20/HL21nx.png","https://s4.ax1x.com/2022/02/20/HL2McR.jpg","https://s4.ax1x.com/2022/02/20/HL2Qj1.jpg","https://s4.ax1x.com/2022/02/20/HL23B6.png","https://s4.ax1x.com/2022/02/20/HL4XBn.jpg","https://s4.ax1x.com/2022/02/20/HL28HK.png","https://s4.ax1x.com/2022/02/20/HL2JAO.png","https://s4.ax1x.com/2022/02/20/HL2YND.png","https://s4.ax1x.com/2022/02/20/HL2t4e.png","https://s4.ax1x.com/2022/02/20/HL2dgA.png","https://s4.ax1x.com/2022/02/20/HL2U9H.png","https://s4.ax1x.com/2022/02/20/HL4XBn.jpg","https://s4.ax1x.com/2022/02/20/HL2yE8.png","https://s4.ax1x.com/2022/02/20/HL2rHf.png","https://s4.ax1x.com/2022/02/20/HL2a3d.png","https://s4.ax1x.com/2022/02/20/HL26US.jpg","https://s4.ax1x.com/2022/02/20/HL2But.jpg","https://s4.ax1x.com/2022/02/20/HL2R3j.jpg","https://s4.ax1x.com/2022/02/20/HL2wjI.jpg"],"datePublished":"2022-02-19T12:37:55.000Z","dateModified":"2022-02-20T13:37:55.000Z","author":{"@type":"Person","name":"xiaoleGun"},"publisher":{"@type":"Organization","name":"xiaoleGun'Blog","logo":{"@type":"ImageObject","url":"https://blog.xiaolegun.cn/img/touxiang.png"}},"description":"这都不会小白向也拯救不了你惹。"}</script><link rel="canonical" href="https://blog.xiaolegun.cn/post/Fuck-Huawei/"><link rel="icon" href="/img/favicon.png"><link rel="stylesheet" href="https://use.fontawesome.com/releases/v6.0.0/css/all.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/highlight.js@9.12.0/styles/atom-one-light.css"><link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Ubuntu:wght@400;600&amp;family=Source+Code+Pro"><link rel="stylesheet" href="/css/default.css"><style>body>.footer,body>.navbar,body>.section{opacity:0}</style><!--!--><!--!--><!--!--><script src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js" defer></script><!--!--><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/cookieconsent@3.1.1/build/cookieconsent.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/lightgallery@1.10.0/dist/css/lightgallery.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/justifiedGallery@3.8.1/dist/css/justifiedGallery.min.css"><!--!--><!--!--><style>.pace{-webkit-pointer-events:none;pointer-events:none;-webkit-user-select:none;-moz-user-select:none;user-select:none}.pace-inactive{display:none}.pace .pace-progress{background:#3273dc;position:fixed;z-index:2000;top:0;right:100%;width:100%;height:2px}</style><script src="https://cdn.jsdelivr.net/npm/pace-js@1.2.4/pace.min.js"></script><!--!--><!--!--><!-- hexo injector head_end start --><script>
  (function () {
      function switchTab() {
          if (!location.hash) {
            return;
          }

          const $tabMenu = document.querySelector(`a[href="${location.hash}"]`);
          if (!$tabMenu) {
            return;
          }

          const $tabMenuContainer = $tabMenu.parentElement.parentElement;
          Array.from($tabMenuContainer.children).forEach($menu => $menu.classList.remove('is-active'));
          Array.from($tabMenuContainer.querySelectorAll('a'))
              .map($menu => document.getElementById($menu.getAttribute("href").substring(1)))
              .forEach($content => $content.classList.add('is-hidden'));

          if ($tabMenu) {
              $tabMenu.parentElement.classList.add('is-active');
          }
          const $activeTab = document.querySelector(location.hash);
          if ($activeTab) {
              $activeTab.classList.remove('is-hidden');
          }
      }
      switchTab();
      window.addEventListener('hashchange', switchTab, false);
  })();
  </script><!-- hexo injector head_end end --><meta name="generator" content="Hexo 6.2.0"></head><body class="is-2-column"><nav class="navbar navbar-main"><div class="container navbar-container"><div class="navbar-brand justify-content-center"><a class="navbar-item navbar-logo" href="/"><img src="/img/touxiang.png" alt="xiaoleGun&#039;Blog" height="28"></a></div><div class="navbar-menu"><div class="navbar-start"><a class="navbar-item" href="/">主页</a><a class="navbar-item" href="/archives">归档</a><a class="navbar-item" href="/categories">分类</a><a class="navbar-item" href="/tags">标签</a><a class="navbar-item" href="/about">关于</a></div><div class="navbar-end"><a class="navbar-item search" title="搜索" href="javascript:;"><i class="fas fa-search"></i></a></div></div></div></nav><section class="section"><div class="container"><div class="columns"><div class="column order-2 column-main is-8-tablet is-8-desktop is-8-widescreen"><div class="card"><article class="card-content article" role="article"><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item"><time dateTime="2022-02-19T12:37:55.000Z" title="2022/2/19 20:37:55">2022-02-19</time>发表</span><span class="level-item"><time dateTime="2022-02-20T13:37:55.000Z" title="2022/2/20 21:37:55">2022-02-20</time>更新</span><span class="level-item">19 分钟读完 (大约2797个字)</span><span class="level-item" id="busuanzi_container_page_pv"><span id="busuanzi_value_page_pv">0</span>次访问</span></div></div><h1 class="title is-3 is-size-4-mobile">华为搞机指北(小白向)</h1><div class="content"><h2 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h2><p>21日就正式开学了，已经初二下了，一天要从7:30上到20:30，生地结业考也快了，还有四个月，以后也没时间写一篇逻辑还算清楚，内容丰富详细，涵盖许多知识的文章或博客？下次这么长的图文&#x2F;博客就要暑假见了。</p>
<h2 id="准备什么？"><a href="#准备什么？" class="headerlink" title="准备什么？"></a>准备什么？</h2><p>小白只需要一台可以运行Windows10的电脑就好力。一些极客想要进阶操作可以准备一台安装了<del>Mac</del>、Ubuntu、Win的电脑</p>
<h2 id="解锁"><a href="#解锁" class="headerlink" title="解锁"></a>解锁</h2><blockquote>
<p>这都不会小白向也拯救不了你惹。</p>
</blockquote>
<h3 id="降级"><a href="#降级" class="headerlink" title="降级"></a>降级</h3><blockquote>
<p>Emui 10及以上版本需要降级，Kirin960系不需要</p>
</blockquote>
<blockquote>
<p>降级到Emui 10之前的Emui 9最后一个版本</p>
</blockquote>
<blockquote>
<p>推荐电脑系统为Windows10及以上，Mac是不能降级的，但可以解BL锁，刷GSI等、、、</p>
</blockquote>
<ul>
<li><p>打开电脑，卸载原来的华为助手，下载<a target="_blank" rel="noopener" href="https://github.com/ProfessorJTJ/HISuite-Proxy/releases/download/2.4/HISuite.Proxy.zip">HiSuite Proxy</a>和<a target="_blank" rel="noopener" href="https://github.com/ProfessorJTJ/HISuite-Proxy/releases/download/2.3.6/HiSuite_11.0.0.530_OVE.rar">HiSuite V11.0.0.530OVE</a>解压并安装，先不要打开，先不要打开，先不要打开。</p>
</li>
<li><p>手机进入拨号输入<code>*#*#2846579#*#*</code>依次进入单板信息查询–&gt;版本信息找到CVersion:是什么C00或其它的，这是运营商定制版本号。</p>
</li>
<li><p>进入<a target="_blank" rel="noopener" href="https://professorjtj.github.io/">Huawei Firm Finder</a>搜索你的机型型号，找到大包小包，如图。<br><img src="https://s4.ax1x.com/2022/02/20/HL2ShQ.png" alt="搜索"><br><img src="https://s4.ax1x.com/2022/02/20/HL2Pcn.png" alt="大包"><br><img src="https://s4.ax1x.com/2022/02/20/HL2C1s.png" alt="CUST小包"><br><img src="https://s4.ax1x.com/2022/02/20/HLgztg.png" alt="小包"><br>这个对不对全凭你感觉（</p>
</li>
<li><p>打开HiSuite Proxy，添加全量包<br><img src="https://s4.ax1x.com/2022/02/20/HL29pj.png" alt="目录"></p>
</li>
</ul>
<p>然后再到刚刚网站上依次将三个包点击<code>Add Rom</code><br><img src="https://s4.ax1x.com/2022/02/20/HL2iXq.png" alt="Add Rom"></p>
<ul>
<li><p>手机连接电脑使用一条稳定的线，手机打开开发者模式(进入关于手机连续点击版本号5次)</p>
</li>
<li><p>点击HiSuite Proxy的<code>Setup</code><br><img src="https://s4.ax1x.com/2022/02/20/HL2kn0.png" alt="Setup"></p>
</li>
</ul>
<p>它会自动弹出来华为手机助手，如果没有弹出请在桌面上打开它，一路继续允许它在手机上安装《手机助手》，然后输入验证码连接。<br><img src="https://s4.ax1x.com/2022/02/20/HL2ZAU.png" alt="验证码"></p>
<p>点击系统更新，如果前面的步骤没有出错的话，不出意外它会出现你选择的版本。<br><img src="https://s4.ax1x.com/2022/02/20/HL2c4g.png" alt="系统版本"></p>
<ul>
<li>等待它下载、传入安装包到手机、手机自动安装、工厂级格式化、开机。</li>
</ul>
<h3 id="获取解锁码并解锁"><a href="#获取解锁码并解锁" class="headerlink" title="获取解锁码并解锁"></a>获取解锁码并解锁</h3><h4 id="渠道"><a href="#渠道" class="headerlink" title="渠道"></a>渠道</h4><p>1、可以在淘宝、咸鱼花个二三十获取解锁码，良心商家可能会用UAndroid给你一键解锁，但我建议你让他们给你获取解锁码，因为以防日后回锁或刷挂了，救砖之后回锁了，总之解锁码一劳永逸。</p>
<p>2、找酷安@某贼PY一下</p>
<h4 id="上手操作"><a href="#上手操作" class="headerlink" title="上手操作"></a>上手操作</h4><h5 id="安装ADB"><a href="#安装ADB" class="headerlink" title="安装ADB"></a>安装ADB</h5><blockquote>
<p>有了解锁码就可以开始这一步了。</p>
</blockquote>
<blockquote>
<p>Win版</p>
</blockquote>
<ul>
<li>先点击这里下载<a href="/img/huawei/platform-tools_r32.0.0-windows.zip">ADB</a>，解压到C盘根目录，如图<br><img src="https://s4.ax1x.com/2022/02/20/HL2E7T.png" alt="ADB"><br>然后在电脑的开始菜单或搜索框搜索<code>电脑信息</code>，进入并拉到最下选择<code>高级系统设置</code></li>
</ul>
<p><img src="https://s4.ax1x.com/2022/02/20/HL2ABV.png" alt="电脑信息"><br>点击<code>环境变量</code></p>
<p><img src="https://s4.ax1x.com/2022/02/20/HL2eNF.png" alt="环境变量"><br>在第二个对话栏(系统变量)下滑找到<code>Path</code></p>
<p><img src="https://s4.ax1x.com/2022/02/20/HL2mh4.png" alt="Path"><br>双击进去，在右面的对话框点击新建输入<code>%adb%</code></p>
<p><img src="https://s4.ax1x.com/2022/02/20/HL2u9J.png" alt="Path_2"><br>按确定返回到上一个菜单，在第二个对话栏(系统变量)，点击新建，变量名输入<code>adb</code>，变量值输入刚刚让你把解压后的文件夹放的路径。</p>
<p><img src="https://s4.ax1x.com/2022/02/20/HL2K39.png" alt="Path_3"><br>按确定<br>然后可以去<code>Powershell</code> or <code>CMD</code>测试你的环境变量力<br>不是Mac的可以跳过去刷机篇了</p>
<blockquote>
<p>Mac版</p>
</blockquote>
<blockquote>
<p>从现在开始会在Mac、Ubuntu完成写作了。因为小白篇和win通用，进阶篇需要ubuntu。</p>
</blockquote>
<ul>
<li>安装Homebrew，打开终端输入<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">/bin/zsh -c &quot;$(curl -fsSL https://gitee.com/cunkai/HomebrewCN/raw/master/Homebrew.sh)&quot;</span><br></pre></td></tr></table></figure>
<img src="https://s4.ax1x.com/2022/02/20/HL21nx.png" alt="Homebrew"></li>
</ul>
<p>输入密码，一路y(确定)<br>结束之后输入在终端输入</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">brew install cask android-platform-tools</span><br></pre></td></tr></table></figure>
<p>(冷知识，不知从什么时候开始brew需要将cask放在install才可以正常安装</p>
<blockquote>
<p>Linux系版</p>
</blockquote>
<p>？？？你都Linux还用教吗？</p>
<h5 id="解锁BL"><a href="#解锁BL" class="headerlink" title="解锁BL"></a>解锁BL</h5><blockquote>
<p>解锁</p>
</blockquote>
<blockquote>
<p>解锁完BL开机出现Your device booting…都是正常现象</p>
</blockquote>
<ul>
<li><p>手机重启到Fastboot<br><img src="https://s4.ax1x.com/2022/02/20/HL2McR.jpg" alt="Fastboot"></p>
</li>
<li><p>打开你刚刚配置好的Powershell或CMD或Mac终端，输入以下命令来解锁</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">fastboot oem unlock #16位数字解锁码</span><br></pre></td></tr></table></figure>
<p>如果不出意外的话你的手机会进入下面的界面<br><img src="https://s4.ax1x.com/2022/02/20/HL2Qj1.jpg" alt="Unlock"></p>
</li>
</ul>
<p>使用音量键选择Yes，然后它会重启到rec格式化Data<br>结束后重启回fastboot检查<font color="#7fff00">PHONE Lock</font>是否变成<font color="#ff0000">PHONE Unlock</font><br /></p>
<blockquote>
<p>回锁</p>
</blockquote>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">fastboot oem relock #16位数字解锁码</span><br></pre></td></tr></table></figure>
<p>部分机型可能是</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">fastboot oem lock #16位数字解锁码</span><br></pre></td></tr></table></figure>

<h2 id="刷机"><a href="#刷机" class="headerlink" title="刷机"></a>刷机</h2><blockquote>
<p>重点介绍如何刷入Phh Treble</p>
</blockquote>
<blockquote>
<p>开始分为小白篇和进阶篇</p>
</blockquote>
<h3 id="小白篇"><a href="#小白篇" class="headerlink" title="小白篇"></a>小白篇</h3><h4 id="获取GSI"><a href="#获取GSI" class="headerlink" title="获取GSI"></a>获取GSI</h4><ul>
<li>先到这里<a target="_blank" rel="noopener" href="https://github.com/phhusson/treble_experimentations/wiki/Generic-System-Image-%28GSI%29-list">Generic System Image List</a>随便找一个你喜欢的Android9-Android12镜像，为arm64 AB分区即可，如treble_arm64_bvS，其中的b便是AB分区<br>再简单介绍一下基于PHH编译类型</li>
</ul>
<blockquote>
<p>例子: treble_arm64_bvS<br>  分解: arm64指的是平台架构、b指的是分区类型，在这里指AB，反之为a，v是指vanilla，反之g是指gapps，S指su，反之为N</p>
</blockquote>
<h4 id="上手操作-1"><a href="#上手操作-1" class="headerlink" title="上手操作"></a>上手操作</h4><ul>
<li>下载好你喜欢的Gsi(华为安卓12是要使用Magisk引导的)<br>手机重启到fastboot，打开终端输入<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">fastboot flash system #filename</span><br></pre></td></tr></table></figure>
等待完成，输入<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">fastboot reboot</span><br></pre></td></tr></table></figure>
<img src="https://s4.ax1x.com/2022/02/20/HL23B6.png" alt="刷入GSI"><br>手机会自动重启，迅速按住音量上键，进入erec，选择格式化Data，输入yes</li>
</ul>
<p><img src="https://s4.ax1x.com/2022/02/20/HL4XBn.jpg" alt="格式化Data"></p>
<p>格式化完了以后就可以进入系统了(仅限Kirin960和Kirin970的安卓12以下，Kirin970的安卓12需要执行一遍Root才可以开机)</p>
<h3 id="进阶篇"><a href="#进阶篇" class="headerlink" title="进阶篇"></a>进阶篇</h3><blockquote>
<p>如果你追求极致性能，且对system分区没有读写需求的话，我们可以让system分区成为EROFS分区格式。</p>
</blockquote>
<blockquote>
<p>这一步我只简单叙述。</p>
</blockquote>
<blockquote>
<p>不仅仅适用于华为手机，对于其它手机，你的内核如果是4.19可以自己打patch启用erofs，4.19以下自行backport</p>
</blockquote>
<h4 id="EROFS介绍"><a href="#EROFS介绍" class="headerlink" title="EROFS介绍"></a>EROFS介绍</h4><p>EROFS文件系统（英文名：Enhanced Read-Only File System）是一个Linux操作系统下的只读文件系统，由华为公司研发，用来在保证嵌入式设备端到端的性能下节省存储空间，尤其是Android设备。相比其他通用文件系统，它使用了减少元数据的设计，并且提供透明压缩技术给目标文件系统用户。</p>
<h4 id="上手操作-2"><a href="#上手操作-2" class="headerlink" title="上手操作"></a>上手操作</h4><ul>
<li><p>先准备好一台安装了Ubuntu20.04及以上版本的电脑，或虚拟机(虚拟机自行研究)</p>
</li>
<li><p>安装好Git</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">sudo apt-get update</span><br><span class="line">sudo apt-get install git lz4 python3 m4</span><br></pre></td></tr></table></figure>
<p><img src="https://s4.ax1x.com/2022/02/20/HL28HK.png" alt="依赖"></p>
</li>
<li><p>打开终端，输入</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">mkdir tmp</span><br><span class="line">cd tmp</span><br><span class="line">wget https://github.com/xiaoleGun/Blog/releases/download/erofs/mkfs.erofs.zip</span><br><span class="line">unzip mkfs.erofs.zip</span><br></pre></td></tr></table></figure>
<p><img src="https://s4.ax1x.com/2022/02/20/HL2JAO.png" alt="创建目录"><br><img src="https://s4.ax1x.com/2022/02/20/HL2YND.png" alt="下载mkfs.erofs"></p>
</li>
</ul>
<p>然后找一个你喜欢的GSI复制到tmp这个目录里如下图<br><img src="https://s4.ax1x.com/2022/02/20/HL2t4e.png" alt="复制GSI"></p>
<p>继续输入</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">mkdir m</span><br><span class="line">sudo mount -o loop,ro filename m</span><br><span class="line">mkdir out</span><br><span class="line">sudo ./mkfs.erofs -zlz4 ./out/system.img ./m</span><br></pre></td></tr></table></figure>

<p>等待它将你的GSI打包为erofs分区格式<br><img src="https://s4.ax1x.com/2022/02/20/HL2dgA.png" alt="打包"><br>然后到tmp&#x2F;out目录找到它然后刷入到你的手机吧<br><img src="https://s4.ax1x.com/2022/02/20/HL2U9H.png" alt="out"></p>
<h2 id="Root"><a href="#Root" class="headerlink" title="Root"></a>Root</h2><blockquote>
<p>你有两个途径来获取Root，一种是在Phh treble设置–&gt;杂项–&gt;启用动态超级用户，另一种是将Rec替换为Magisk。</p>
</blockquote>
<blockquote>
<p>我主要讲解Magisk的方式，第一种就是一个选项，很简单</p>
</blockquote>
<h3 id="上手操作-3"><a href="#上手操作-3" class="headerlink" title="上手操作"></a>上手操作</h3><ul>
<li>下载<a target="_blank" rel="noopener" href="https://github.com/xiaoleGun/kernel_huawei_kirin970/releases/download/v1.0/magisk_241.img">Magsik</a>(可能需要挂t)</li>
</ul>
<p>打开终端输入</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">fastboot flash recovery_ramdisk filename</span><br><span class="line">fastboot reboot</span><br></pre></td></tr></table></figure>

<p>迅速按音量上键进入erec格式化Data<br><img src="https://s4.ax1x.com/2022/02/20/HL4XBn.jpg" alt="格式化Data"></p>
<p>解释: 只是套用华为机制的小伎俩，使重启也不会掉Magisk，原理是erec格式化Data需要重启至rec，但rec分区已经被我们替换为Magisk，所以它每次开机都会记住它需要格式化Data也就默认每次进入rec，所以我们可以重启也不会掉Magisk。</p>
<ul>
<li>进入系统<br>如果没有Magisk请自行下载一个Magisk可能需要你修复环境。修复即可。</li>
</ul>
<p>至于每次弹出第三方su，请下载MT管理器到systen&#x2F;xbin删除su即可(暂未发现副作用)</p>
<h2 id="优化"><a href="#优化" class="headerlink" title="优化"></a>优化</h2><blockquote>
<p>主要是换内核及调度</p>
</blockquote>
<ul>
<li><p>Kirin960<br><a target="_blank" rel="noopener" href="https://maimaiguanfan.lanzoux.com/b0evjoybe">点击下载盘古内核</a>作者为@麦麦观饭<br>爵士: Huawei P10, P10 Plus, Mate9, Mate 9 Pro<br>骑士: Honor 9, 8Pro (v9), Huawei Nova2S, tablet M5<br>只需要按照对应的版本下载即可<br><img src="https://s4.ax1x.com/2022/02/20/HL2yE8.png" alt="爵士"><br><img src="https://s4.ax1x.com/2022/02/20/HL2rHf.png" alt="骑士"><br>下载完之后，打开终端输入</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">fastboot flash kernel filename</span><br><span class="line">fastboot reboot</span><br></pre></td></tr></table></figure>
<p>不出意外的话，会正常开机，请到关于本机查看内核版本号是否正确。<br>然后你需要Root，到Magisk刷入盘古内核Spectrum调度<br><img src="https://s4.ax1x.com/2022/02/20/HL2a3d.png" alt="调度"><br>重启后打开Spectrum<br>选择gameing，会很丝滑，但耗电+114514</p>
</li>
<li><p>Kirin970<br><a target="_blank" rel="noopener" href="https://github.com/xiaoleGun/kernel_huawei_kirin970/releases/tag/v1.0">点击下载Miku Kernel</a><br>下载完之后，打开终端输入</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">fastboot flash kernel filename</span><br><span class="line">fastboot reboot</span><br></pre></td></tr></table></figure>
<p>不出意外的话，会正常开机，请到关于本机查看内核版本号是否为Miku-Snow。</p>
</li>
</ul>
<blockquote>
<p>安卓12专属</p>
</blockquote>
<p>你需要Root，下载Scene5按照下图进行调度配置</p>
<p><img src="https://s4.ax1x.com/2022/02/20/HL26US.jpg" alt="省电"><br><img src="https://s4.ax1x.com/2022/02/20/HL2But.jpg" alt="均衡"><br><img src="https://s4.ax1x.com/2022/02/20/HL2R3j.jpg" alt="性能"><br><img src="https://s4.ax1x.com/2022/02/20/HL2wjI.jpg" alt="极速"></p>
<p>推荐将Quickstep设置为极速模式，这样动画丝滑流畅，其它应用使用性能即可，可自行斟酌调整频率</p>
<h2 id="后记"><a href="#后记" class="headerlink" title="后记"></a>后记</h2><p>写完这些东西后有一种放松的感觉，但又想到酷安还要再排版一遍便很让人麻烦，点名酷安支持Markdown！！！</p>
</div><div class="article-licensing box"><div class="licensing-title"><p>华为搞机指北(小白向)</p><p><a href="https://blog.xiaolegun.cn/post/Fuck-Huawei/">https://blog.xiaolegun.cn/post/Fuck-Huawei/</a></p></div><div class="licensing-meta level is-mobile"><div class="level-left"><div class="level-item is-narrow"><div><h6>作者</h6><p>xiaoleGun</p></div></div><div class="level-item is-narrow"><div><h6>发布于</h6><p>2022-02-19</p></div></div><div class="level-item is-narrow"><div><h6>更新于</h6><p>2022-02-20</p></div></div><div class="level-item is-narrow"><div><h6>许可协议</h6><p><a class="icons" rel="noopener" target="_blank" title="Creative Commons" href="https://creativecommons.org/"><i class="icon fab fa-creative-commons"></i></a><a class="icons" rel="noopener" target="_blank" title="Attribution" href="https://creativecommons.org/licenses/by/4.0/"><i class="icon fab fa-creative-commons-by"></i></a><a class="icons" rel="noopener" target="_blank" title="Noncommercial" href="https://creativecommons.org/licenses/by-nc/4.0/"><i class="icon fab fa-creative-commons-nc"></i></a></p></div></div></div></div></div><div class="article-tags is-size-7 mb-4"><span class="mr-2">#</span><a class="link-muted mr-2" rel="tag" href="/tags/GSI/">GSI</a></div><!--!--></article></div><div class="card"><div class="card-content"><h3 class="menu-label has-text-centered">喜欢这篇文章？打赏一下作者吧</h3><div class="buttons is-centered"><a class="button donate" data-type="alipay"><span class="icon is-small"><i class="fab fa-alipay"></i></span><span>支付宝</span><span class="qrcode"><img src="/img/alipay.jpg" alt="支付宝"></span></a><a class="button donate" data-type="wechat"><span class="icon is-small"><i class="fab fa-weixin"></i></span><span>微信</span><span class="qrcode"><img src="/img/wechat.png" alt="微信"></span></a></div></div></div><nav class="post-navigation mt-4 level is-mobile"><div class="level-start"><a class="article-nav-prev level level-item link-muted" href="/post/writing-recovery-device-tree-for-new-device/"><i class="level-item fas fa-chevron-left"></i><span class="level-item"> </span></a></div><div class="level-end"><a class="article-nav-next level level-item link-muted" href="/post/Project-Mushroom/"><span class="level-item">Project-Mushroom</span><i class="level-item fas fa-chevron-right"></i></a></div></nav><div class="card"><div class="card-content"><h3 class="title is-5">评论</h3><div class="content" id="valine-thread"></div><script src="//cdn.jsdelivr.net/npm/leancloud-storage@3/dist/av-min.js"></script><script src="https://cdn.jsdelivr.net/npm/valine@1.4.16/dist/Valine.min.js"></script><script>new Valine({
            el: '#valine-thread',
            appId: "Ou1qvpQXJbkoS36f8u6xjWiF-gzGzoHsz",
            appKey: "t4FiwzvUxbTTNwx7dQpiHE3d",
            
            avatar: "retro",
            avatarForce: false,
            meta: ["nick","mail","link"],
            pageSize: 10,
            lang: "zh-CN",
            visitor: false,
            highlight: true,
            recordIP: true,
            
            
            
            enableQQ: true,
            requiredFields: [],
        });</script></div></div></div><div class="column column-left is-4-tablet is-4-desktop is-4-widescreen  order-1"><div class="card widget" data-type="profile"><div class="card-content"><nav class="level"><div class="level-item has-text-centered flex-shrink-1"><div><figure class="image is-128x128 mx-auto mb-2"><img class="avatar is-rounded" src="/img/touxiang.png" alt="xiaoleGun"></figure><p class="title is-size-4 is-block" style="line-height:inherit;">xiaoleGun</p><p class="is-size-6 is-block">“尊严只在剑峰之上，真理只在大炮射程之中”</p><p class="is-size-6 is-flex justify-content-center"><i class="fas fa-map-marker-alt mr-1"></i><span>Beijing, P.R.C.</span></p></div></div></nav><nav class="level is-mobile"><div class="level-item has-text-centered is-marginless"><div><p class="heading">文章</p><a href="/archives"><p class="title">3</p></a></div></div><div class="level-item has-text-centered is-marginless"><div><p class="heading">分类</p><a href="/categories"><p class="title">0</p></a></div></div><div class="level-item has-text-centered is-marginless"><div><p class="heading">标签</p><a href="/tags"><p class="title">2</p></a></div></div></nav><div class="level"><a class="level-item button is-primary is-rounded" href="https://github.com/xiaoleGun" target="_blank" rel="noopener">关注我</a></div><div class="level is-mobile is-multiline"><a class="level-item button is-transparent is-marginless" target="_blank" rel="noopener" title="Github" href="https://github.com/xiaoleGun"><i class="fab fa-github"></i></a><a class="level-item button is-transparent is-marginless" target="_blank" rel="noopener" title="Twitter" href="https://twitter.com/xiaoleGun"><i class="fab fa-twitter"></i></a><a class="level-item button is-transparent is-marginless" target="_blank" rel="noopener" title="RSS" href="/"><i class="fas fa-rss"></i></a></div></div></div><!--!--><!--!--><div class="card widget" data-type="recent-posts"><div class="card-content"><h3 class="menu-label">最新文章</h3><article class="media"><div class="media-content"><p class="date"><time dateTime="2024-02-20T02:55:36.327Z">2024-02-20</time></p><p class="title"><a href="/post/writing-recovery-device-tree-for-new-device/"> </a></p></div></article><article class="media"><div class="media-content"><p class="date"><time dateTime="2022-02-19T12:37:55.000Z">2022-02-19</time></p><p class="title"><a href="/post/Fuck-Huawei/">华为搞机指北(小白向)</a></p></div></article><article class="media"><div class="media-content"><p class="date"><time dateTime="2022-01-15T13:37:55.000Z">2022-01-15</time></p><p class="title"><a href="/post/Project-Mushroom/">Project-Mushroom</a></p></div></article></div></div><div class="card widget" data-type="archives"><div class="card-content"><div class="menu"><h3 class="menu-label">归档</h3><ul class="menu-list"><li><a class="level is-mobile" href="/archives/2024/02/"><span class="level-start"><span class="level-item">二月 2024</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/archives/2022/02/"><span class="level-start"><span class="level-item">二月 2022</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/archives/2022/01/"><span class="level-start"><span class="level-item">一月 2022</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li></ul></div></div></div><div class="card widget" data-type="tags"><div class="card-content"><div class="menu"><h3 class="menu-label">标签</h3><div class="field is-grouped is-grouped-multiline"><div class="control"><a class="tags has-addons" href="/tags/GSI/"><span class="tag">GSI</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/ROM/"><span class="tag">ROM</span><span class="tag">1</span></a></div></div></div></div></div><div class="card widget" data-type="subscribe-email"><div class="card-content"><div class="menu"><h3 class="menu-label">订阅更新</h3><form action="https://feedburner.google.com/fb/a/mailverify" method="post" target="popupwindow" onsubmit="window.open(&#039;https://feedburner.google.com/fb/a/mailverify?uri=&#039;,&#039;popupwindow&#039;,&#039;scrollbars=yes,width=550,height=520&#039;);return true"><input type="hidden" value="" name="uri"><input type="hidden" name="loc" value="en_US"><div class="field has-addons"><div class="control has-icons-left is-expanded"><input class="input" name="email" type="email" placeholder="Email"><span class="icon is-small is-left"><i class="fas fa-envelope"></i></span></div><div class="control"><input class="button" type="submit" value="订阅"></div></div></form></div></div></div><div class="card widget"><div class="card-content"><div class="notification is-danger">You need to set <code>client_id</code> and <code>slot_id</code> to show this AD unit. Please set it in <code>_config.yml</code>.</div></div></div></div><!--!--></div></div></section><footer class="footer"><div class="container"><div class="level"><div class="level-start"><a class="footer-logo is-block mb-2" href="/"><img src="/img/touxiang.png" alt="xiaoleGun&#039;Blog" height="28"></a><p class="is-size-7"><span>&copy;&nbsp;2020 - 2024 xiaoleGun</span>  Powered by <a href="https://hexo.io/" target="_blank" rel="noopener">Hexo</a> &amp; <a href="https://github.com/ppoffice/hexo-theme-icarus" target="_blank" rel="noopener">Icarus</a><br><span id="busuanzi_container_site_uv">共<span id="busuanzi_value_site_uv">0</span>个访客</span></p></div><div class="level-end"><div class="field has-addons"><p class="control"><a class="button is-transparent is-large" target="_blank" rel="noopener" title="Creative Commons" href="https://creativecommons.org/"><i class="fab fa-creative-commons"></i></a></p><p class="control"><a class="button is-transparent is-large" target="_blank" rel="noopener" title="Attribution 4.0 International" href="https://creativecommons.org/licenses/by/4.0/"><i class="fab fa-creative-commons-by"></i></a></p></div></div></div></div></footer><script src="https://cdn.jsdelivr.net/npm/jquery@3.3.1/dist/jquery.min.js"></script><script src="https://cdn.jsdelivr.net/npm/moment@2.22.2/min/moment-with-locales.min.js"></script><script src="https://cdn.jsdelivr.net/npm/clipboard@2.0.4/dist/clipboard.min.js" defer></script><script>moment.locale("zh-CN");</script><script>var IcarusThemeSettings = {
            article: {
                highlight: {
                    clipboard: true,
                    fold: 'unfolded'
                }
            }
        };</script><script src="/js/column.js"></script><script src="/js/animation.js"></script><a id="back-to-top" title="回到顶端" href="javascript:;"><i class="fas fa-chevron-up"></i></a><script src="/js/back_to_top.js" defer></script><!--!--><!--!--><!--!--><!--!--><script src="https://cdn.jsdelivr.net/npm/cookieconsent@3.1.1/build/cookieconsent.min.js" defer></script><script>window.addEventListener("load", () => {
      window.cookieconsent.initialise({
        type: "info",
        theme: "edgeless",
        static: false,
        position: "bottom-left",
        content: {
          message: "此网站使用Cookie来改善您的体验。",
          dismiss: "知道了！",
          allow: "允许使用Cookie",
          deny: "拒绝",
          link: "了解更多",
          policy: "Cookie政策",
          href: "https://www.cookiesandyou.com/",
        },
        palette: {
          popup: {
            background: "#edeff5",
            text: "#838391"
          },
          button: {
            background: "#4b81e8"
          },
        },
      });
    });</script><script src="https://cdn.jsdelivr.net/npm/lightgallery@1.10.0/dist/js/lightgallery.min.js" defer></script><script src="https://cdn.jsdelivr.net/npm/justifiedGallery@3.8.1/dist/js/jquery.justifiedGallery.min.js" defer></script><script>window.addEventListener("load", () => {
            if (typeof $.fn.lightGallery === 'function') {
                $('.article').lightGallery({ selector: '.gallery-item' });
            }
            if (typeof $.fn.justifiedGallery === 'function') {
                if ($('.justified-gallery > p > .gallery-item').length) {
                    $('.justified-gallery > p > .gallery-item').unwrap();
                }
                $('.justified-gallery').justifiedGallery();
            }
        });</script><!--!--><!--!--><!--!--><!--!--><!--!--><script src="/js/main.js" defer></script><div class="searchbox"><div class="searchbox-container"><div class="searchbox-header"><div class="searchbox-input-container"><input class="searchbox-input" type="text" placeholder="想要查找什么..."></div><a class="searchbox-close" href="javascript:;">×</a></div><div class="searchbox-body"></div></div></div><script src="/js/insight.js" defer></script><script>document.addEventListener('DOMContentLoaded', function () {
            loadInsight({"contentUrl":"/content.json"}, {"hint":"想要查找什么...","untitled":"(无标题)","posts":"文章","pages":"页面","categories":"分类","tags":"标签"});
        });</script></body></html>